!function(e){e(document).ready(function(){t.init()});var t={init:function(){this.idgFeatureCardWidgets(),this.idgBannersWidgets(),this.idgBlockInit(),this.idgSectionsWidgetsAreas(),this.idgSectionsWidgetsAreasCustomize(),this.idgTextImageBoxWidgets()},idgFeatureCardWidgets:function(){e(document).on("keyup",".idg-feature-card-widget .card-title",function(){e(this).closest(".idg-feature-card-widget").find(".card-title").text(e(this).val())}),e(document).on("change",".idg-feature-card-widget .icon-selector",function(){"upload-custom-icon"===e(this).val()?(e(this).closest(".idg-feature-card-widget").find(".feature-card .icon > img").show(),e(this).closest(".idg-feature-card-widget").find(".custom-icon").removeClass("hidden")):(e(this).closest(".idg-feature-card-widget").find(".custom-icon").addClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon > img").hide(),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon").removeClass().addClass("icon "+e(this).val())),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon").removeClass().addClass("icon "+e(this).val())}),e(document).on("change",".idg-feature-card-widget .card-model",function(){var t=e(this).val();e(this).closest(".idg-feature-card-widget").find(".feature-card").removeClass().addClass("feature-card static-height "+t),"card-3"===t?(e(this).closest(".idg-feature-card-widget").find(".card-desc-wrapper").removeClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .card-desc, .feature-card .card-btn").show()):(e(this).closest(".idg-feature-card-widget").find(".card-desc-wrapper").addClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .card-desc, .feature-card .card-btn").hide())}),e(document).on("keyup",".idg-feature-card-widget .card-desc",function(){e(this).closest(".idg-feature-card-widget").find(".card-desc").text(e(this).val())}),e(document).on("keyup",".idg-feature-card-widget .card-btn-text",function(){e(this).closest(".idg-feature-card-widget").find(".card-btn.btn").text(e(this).val())})},idgBannersWidgets:function(){e(document).on("click",".number-of-banners-input",function(t){wpWidgets.save(e(this).closest(".widget"),0,1,0)}),e(document).on("click",".upload_image_button",function(t){t.preventDefault();var i=e(this);wp.media.editor.send.attachment=function(e,t){i.prev("input").val(t.id),i.parent().find("img.banner-img-preview").attr("src",t.url),wpWidgets.save(i.closest(".widget"),0,1,0)},wp.media.editor.open(i)}),e(document).on("click",".remove-banner-item",function(t){t.preventDefault();var i=e(this).closest(".idg-banners-widget"),a=i.find(".banners-items .banner").length;e(this).closest(".banner").addClass("deleting-banner").fadeOut(),i.find(".number-of-banners-input").val(a-1),i.find(".banner.deleting-banner").remove(),wpWidgets.save(i.closest(".widget"),0,1,0)})},idgBlockInit:function(){if(wp.element){var e=wp.element.createElement,t=wp.blocks.registerBlockType,i=wp.editor.RichText;t("gutenberg-boilerplate-es5/idgwp-gutenberg-block-card",{title:"Feature card block",icon:"paperclip",category:"widgets",attributes:{content:{type:"string",source:"html",selector:"div"}},edit:function(t){var a=t.attributes.content;return e(i,{tagName:"div",className:t.className,onChange:function(e){t.setAttributes({content:e}),function(e){e.startsWith("<a")?{backgroundColor:"#f3f4f5"}:{backgroundColor:"#7F0013"}}(a)},value:a})},save:function(t){var a=t.attributes.content;return e(i.Content,{tagName:"div",className:t.className,value:a})}})}},idgSectionsWidgetsAreas:function(){e(".widget-liquid-right").length&&(e(".widget-liquid-right").append(idg_admin.idg_custom_sections_form),e("div[id^=idg_wp_widget_area_]").each(function(){e(this).closest(".widgets-holder-wrap").addClass("idg-wp-custom-widget-area"),e(this).closest(".widgets-holder-wrap").find(".sidebar-description").length?e(this).closest(".widgets-holder-wrap").find(".sidebar-description").append('<p class="description description-idg"><a href="#" class="button-link button-link-delete idg-wp-widget-remove-area">Deletar esta seção</a></p>'):e(this).closest(".widgets-holder-wrap").find(".sidebar-name").after('<div class="sidebar-description"><p class="description"><a href="#" class="button-link button-link-delete idg-wp-widget-remove-area">Deletar esta seção</a></p></div>');e(this).closest(".widgets-holder-wrap").find(".description").last().append('<p><label>Section title</label><input class="widefat section-area-title" type="text"></p><p><label>Section custom class</label><input class="widefat section-area-classes" type="text"></p><p><label>Before each widget class</label><input class="widefat section-area-before-widget-classes" type="text"></p><div class="widget-control-actions" style="min-height: 32px;"><div class="alignright"><a href="#" class="section-area-custom-data-update button button-primary right">Update section</a></div></div>');var t=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id");e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_get_custom_data_in_widget_area",idg_wp_widgets_area_id:t},success:function(i){i.success&&(e("#"+t).find(".section-area-title").val(i.data.section_title),e("#"+t).find(".section-area-classes").val(i.data.section_class),e("#"+t).find(".section-area-before-widget-classes").val(i.data.section_before_widget_class))}}),e(".idg-wp-widget-remove-area").click(function(t){t.preventDefault();var i=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id");return e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_remove_widget_area",idg_wp_widgets_area_id:i},success:function(t){t.success&&e("#"+i).closest(".widgets-holder-wrap").remove()}}),!1}),e(".section-area-custom-data-update").click(function(t){t.preventDefault();var i=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id"),a=e("#"+i).find(".section-area-title").val(),s=e("#"+i).find(".section-area-classes").val(),d=e("#"+i).find(".section-area-before-widget-classes").val();return e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_update_custom_data_in_widget_area",idg_wp_widgets_area_id:i,section_area_title:a,section_area_classes:s,section_before_widget_class:d},success:function(e){e.success}}),!1})}))},idgSectionsWidgetsAreasCustomize:function(){if(e("#idg-wp-home-widgets-sections-selector").length){var t=e("#idg-wp-home-widgets-sections-sortable"),i=e("#idg-wp-home-widgets-sections-selected"),a=[];function s(){a=[],e.each(t.find("li"),function(){a.push(e(this).attr("id"))}),i.val(a.toString()),i.trigger("change")}t.sortable(),t.disableSelection(),t.on("sortstop",s),e("#idg-wp-add-home-widgets-sections").on("click",function(){var t='<li id="'+e("#idg-wp-home-widgets-sections-selector").val()+'">'+e("#idg-wp-home-widgets-sections-selector option:selected").text()+' <a href="#" class="dashicons dashicons-trash"></a></li>';e("#idg-wp-home-widgets-sections-sortable").append(t),s()}),t.find("li > a").on("click",function(){e(this).parent().hide(),e(this).parent().remove(),s()})}},idgTextImageBoxWidgets:function(){var t=e(".idg-text");tinymce.init({selector:".idg-rich-text",menubar:!1,height:"200",plugins:"link",toolbar:"undo, redo, bold, italic, alignleft, aligncenter, alignright, alignjustify, cut, link, copy, paste",setup:function(i){i.on("init",function(){}),i.on("keyup",function(a){!function(i,a){e(i).closest(".idg-text-image-box-widget").find(t).html(a),t.trigger("change")}(i.getElement(),i.getContent()),tinyMCE.triggerSave()})}})}}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLm1pbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImFkbWluIiwiaW5pdCIsInRoaXMiLCJpZGdGZWF0dXJlQ2FyZFdpZGdldHMiLCJpZGdCYW5uZXJzV2lkZ2V0cyIsImlkZ0Jsb2NrSW5pdCIsImlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzIiwiaWRnU2VjdGlvbnNXaWRnZXRzQXJlYXNDdXN0b21pemUiLCJpZGdUZXh0SW1hZ2VCb3hXaWRnZXRzIiwib24iLCJjbG9zZXN0IiwiZmluZCIsInRleHQiLCJ2YWwiLCJzaG93IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhpZGUiLCJjYXJkTW9kZWwiLCJlIiwid3BXaWRnZXRzIiwic2F2ZSIsInByZXZlbnREZWZhdWx0IiwiY2xpY2tlZEJ1dHRvbiIsIndwIiwibWVkaWEiLCJlZGl0b3IiLCJzZW5kIiwiYXR0YWNobWVudCIsInByb3BzIiwicHJldiIsImlkIiwicGFyZW50IiwiYXR0ciIsInVybCIsIm9wZW4iLCJiYW5uZXJzIiwibiIsImxlbmd0aCIsImZhZGVPdXQiLCJyZW1vdmUiLCJlbGVtZW50IiwiZWwiLCJjcmVhdGVFbGVtZW50IiwicmVnaXN0ZXJCbG9ja1R5cGUiLCJibG9ja3MiLCJSaWNoVGV4dCIsInRpdGxlIiwiaWNvbiIsImNhdGVnb3J5IiwiYXR0cmlidXRlcyIsImNvbnRlbnQiLCJ0eXBlIiwic291cmNlIiwic2VsZWN0b3IiLCJlZGl0IiwidGFnTmFtZSIsImNsYXNzTmFtZSIsIm9uQ2hhbmdlIiwibmV3Q29udGVudCIsInNldEF0dHJpYnV0ZXMiLCJzdGFydHNXaXRoIiwiYmFja2dyb3VuZENvbG9yIiwiY2hlY2tGb3JBRWxlbWVudCIsInZhbHVlIiwiQ29udGVudCIsImFwcGVuZCIsImlkZ19hZG1pbiIsImlkZ19jdXN0b21fc2VjdGlvbnNfZm9ybSIsImVhY2giLCJhZnRlciIsImxhc3QiLCJzZWN0aW9uVGl0bGUiLCJpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkIiwiYWpheCIsImFqYXh1cmwiLCJkYXRhIiwiYWN0aW9uIiwic3VjY2VzcyIsInJlcyIsInNlY3Rpb25fdGl0bGUiLCJzZWN0aW9uX2NsYXNzIiwic2VjdGlvbl9iZWZvcmVfd2lkZ2V0X2NsYXNzIiwiY2xpY2siLCJldmVudCIsInNlY3Rpb25fYXJlYV90aXRsZSIsInNlY3Rpb25fYXJlYV9jbGFzc2VzIiwiJHNlY3Rpb25zTGlzdCIsIiRzZWN0aW9uc1NlbGVjdGVkIiwic2VjdGlvbnNWYWxzIiwidXBkYXRlU2VjdGlvbkxpc3QiLCJwdXNoIiwidG9TdHJpbmciLCJ0cmlnZ2VyIiwic29ydGFibGUiLCJkaXNhYmxlU2VsZWN0aW9uIiwibGkiLCIkaWRnVGV4dCIsInRpbnltY2UiLCJtZW51YmFyIiwiaGVpZ2h0IiwicGx1Z2lucyIsInRvb2xiYXIiLCJzZXR1cCIsImh0bWwiLCJ1cGRhdGVUZXh0QXJlYSIsImdldEVsZW1lbnQiLCJnZXRDb250ZW50IiwidGlueU1DRSIsInRyaWdnZXJTYXZlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxHQUNWQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2pCQyxFQUFNQyxTQUdQLElBQUlELEVBQVEsQ0FDWEMsS0FBTSxXQUNMQyxLQUFLQyx3QkFDTEQsS0FBS0Usb0JBQ0xGLEtBQUtHLGVBQ0xILEtBQUtJLDBCQUNMSixLQUFLSyxtQ0FDTEwsS0FBS00sMEJBR05MLHNCQUF1QixXQUN0Qk4sRUFBRUMsVUFBVVcsR0FBRyxRQUFTLHVDQUF3QyxXQUMvRFosRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUssZUFBZUMsS0FBS2YsRUFBRUssTUFBTVcsU0FHOUVoQixFQUFFQyxVQUFVVyxHQUFHLFNBQVUsMENBQTJDLFdBRWxELHVCQURGWixFQUFFSyxNQUFNVyxPQUV0QmhCLEVBQUVLLE1BQU1RLFFBQVEsNEJBQTRCQyxLQUFLLDZCQUE2QkcsT0FDOUVqQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyxnQkFBZ0JJLFlBQVksWUFFN0VsQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyxnQkFBZ0JLLFNBQVMsVUFDMUVuQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyw2QkFBNkJNLE9BQzlFcEIsRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUssdUJBQXVCSSxjQUFjQyxTQUFTLFFBQVVuQixFQUFFSyxNQUFNVyxRQUVsSGhCLEVBQUVLLE1BQU1RLFFBQVEsNEJBQTRCQyxLQUFLLHVCQUF1QkksY0FBY0MsU0FBUyxRQUFVbkIsRUFBRUssTUFBTVcsU0FHbEhoQixFQUFFQyxVQUFVVyxHQUFHLFNBQVUsdUNBQXdDLFdBQ2hFLElBQUlTLEVBQVlyQixFQUFFSyxNQUFNVyxNQUN4QmhCLEVBQUVLLE1BQU1RLFFBQVEsNEJBQTRCQyxLQUFLLGlCQUFpQkksY0FBY0MsU0FBUyw4QkFBZ0NFLEdBQ3ZHLFdBQWRBLEdBQ0hyQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyxzQkFBc0JJLFlBQVksVUFDbkZsQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyxxREFBcURHLFNBRXRHakIsRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUssc0JBQXNCSyxTQUFTLFVBQ2hGbkIsRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUsscURBQXFETSxVQUl4R3BCLEVBQUVDLFVBQVVXLEdBQUcsUUFBUyxzQ0FBdUMsV0FDOURaLEVBQUVLLE1BQU1RLFFBQVEsNEJBQTRCQyxLQUFLLGNBQWNDLEtBQUtmLEVBQUVLLE1BQU1XLFNBRzdFaEIsRUFBRUMsVUFBVVcsR0FBRyxRQUFTLDBDQUEyQyxXQUNsRVosRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUssaUJBQWlCQyxLQUFLZixFQUFFSyxNQUFNVyxVQUlqRlQsa0JBQW1CLFdBRWxCUCxFQUFFQyxVQUFVVyxHQUFHLFFBQVMsMkJBQTRCLFNBQVVVLEdBQzdEQyxVQUFVQyxLQUFNeEIsRUFBRUssTUFBTVEsUUFBUSxXQUFZLEVBQUcsRUFBRyxLQUduRGIsRUFBRUMsVUFBVVcsR0FBRyxRQUFTLHVCQUF3QixTQUFVVSxHQUN6REEsRUFBRUcsaUJBQ0YsSUFBSUMsRUFBZ0IxQixFQUFFSyxNQUV0QnNCLEdBQUdDLE1BQU1DLE9BQU9DLEtBQUtDLFdBQWEsU0FBU0MsRUFBT0QsR0FDakRMLEVBQWNPLEtBQUssU0FBU2pCLElBQUtlLEVBQVdHLElBQzVDUixFQUFjUyxTQUFTckIsS0FBSywwQkFBMEJzQixLQUFNLE1BQU9MLEVBQVdNLEtBQzlFZCxVQUFVQyxLQUFNRSxFQUFjYixRQUFRLFdBQVksRUFBRyxFQUFHLElBRXpEYyxHQUFHQyxNQUFNQyxPQUFPUyxLQUFNWixLQUd2QjFCLEVBQUVDLFVBQVVXLEdBQUcsUUFBUyxzQkFBdUIsU0FBVVUsR0FDeERBLEVBQUVHLGlCQUNGLElBQUljLEVBQVV2QyxFQUFFSyxNQUFNUSxRQUFRLHVCQUM3QjJCLEVBQUlELEVBQVF6QixLQUFLLDBCQUEwQjJCLE9BRTVDekMsRUFBRUssTUFBTVEsUUFBUSxXQUFXTSxTQUFTLG1CQUFtQnVCLFVBQ3ZESCxFQUFRekIsS0FBSyw0QkFBNEJFLElBQUt3QixFQUFJLEdBQ2xERCxFQUFRekIsS0FBSywyQkFBMkI2QixTQUN4Q3BCLFVBQVVDLEtBQU1lLEVBQVExQixRQUFRLFdBQVksRUFBRyxFQUFHLE1BS3BETCxhQUFjLFdBQ2IsR0FBSW1CLEdBQUdpQixRQUFTLENBRWYsSUFBSUMsRUFBS2xCLEdBQUdpQixRQUFRRSxjQUNuQkMsRUFBb0JwQixHQUFHcUIsT0FBT0Qsa0JBQzlCRSxFQUFXdEIsR0FBR0UsT0FBT29CLFNBYXRCRixFQUFtQix1REFBd0QsQ0FDMUVHLE1BQU8scUJBQ1BDLEtBQU0sWUFDTkMsU0FBVSxVQUNWQyxXQUFZLENBQ1hDLFFBQVMsQ0FDUkMsS0FBTSxTQUNOQyxPQUFRLE9BQ1JDLFNBQVUsUUFHWkMsS0FBTSxTQUFVMUIsR0FDZixJQUFJc0IsRUFBVXRCLEVBQU1xQixXQUFXQyxRQU8vQixPQUFPVCxFQUNOSSxFQUNBLENBQ0NVLFFBQVMsTUFDVEMsVUFBVzVCLEVBQU00QixVQUNqQkMsU0FWRixTQUEwQkMsR0FDekI5QixFQUFNK0IsY0FBZSxDQUFFVCxRQUFTUSxJQTFCbkMsU0FBMEJSLEdBQ3JCQSxFQUFRVSxXQUFXLE1BRVQsQ0FBRUMsZ0JBQWlCLFdBR25CLENBQUVBLGdCQUFpQixXQXFCL0JDLENBQWtCWixJQVNqQmEsTUFBT2IsS0FNVjlCLEtBQU0sU0FBVVEsR0FDZixJQUFJc0IsRUFBVXRCLEVBQU1xQixXQUFXQyxRQUUvQixPQUFPVCxFQUFJSSxFQUFTbUIsUUFBUyxDQUM1QlQsUUFBUyxNQUNUQyxVQUFXNUIsRUFBTTRCLFVBQ2pCTyxNQUFPYixTQVFaN0Msd0JBQXlCLFdBQ3BCVCxFQUFFLHdCQUF3QnlDLFNBQzdCekMsRUFBRSx3QkFBd0JxRSxPQUFPQyxVQUFVQywwQkFFaEJ2RSxFQUFHLGdDQUNUd0UsS0FBTSxXQUMxQnhFLEVBQUVLLE1BQU1RLFFBQVEsd0JBQXdCTSxTQUFTLDZCQUM3Q25CLEVBQUVLLE1BQU1RLFFBQVEsd0JBQXdCQyxLQUFLLHdCQUF3QjJCLE9BQ3hFekMsRUFBRUssTUFBTVEsUUFBUSx3QkFBd0JDLEtBQUssd0JBQXdCdUQsT0FBTyxrSkFFNUVyRSxFQUFFSyxNQUFNUSxRQUFRLHdCQUF3QkMsS0FBSyxpQkFBaUIyRCxNQUFNLHlLQXNCckV6RSxFQUFFSyxNQUFNUSxRQUFRLHdCQUF3QkMsS0FBSyxnQkFBZ0I0RCxPQUFPTCxPQUFPTSx1ZkFFM0UsSUFBSUMsRUFBeUI1RSxFQUFFSyxNQUFNUSxRQUFTLHdCQUF5QkMsS0FBTSxnQ0FBaUNzQixLQUFNLE1BRXBIcEMsRUFBRTZFLEtBQU0sQ0FDUHRCLEtBQU0sT0FDTmxCLElBQUtpQyxVQUFVUSxRQUNmQyxLQUNDLENBQ0NDLE9BQVMsd0NBQ1RKLHVCQUF5QkEsR0FFM0JLLFFBQVMsU0FBVUMsR0FDZEEsRUFBSUQsVUFDUGpGLEVBQUUsSUFBTTRFLEdBQXdCOUQsS0FBSyx1QkFBdUJFLElBQUlrRSxFQUFJSCxLQUFLSSxlQUN6RW5GLEVBQUUsSUFBTTRFLEdBQXdCOUQsS0FBSyx5QkFBeUJFLElBQUlrRSxFQUFJSCxLQUFLSyxlQUMzRXBGLEVBQUUsSUFBTTRFLEdBQXdCOUQsS0FBSyx1Q0FBdUNFLElBQUlrRSxFQUFJSCxLQUFLTSxpQ0FLNUZyRixFQUFHLDhCQUErQnNGLE1BQU8sU0FBVUMsR0FDbERBLEVBQU05RCxpQkFDTixJQUFJbUQsRUFBMEI1RSxFQUFFSyxNQUFNUSxRQUFTLHdCQUF5QkMsS0FBTSxnQ0FBaUNzQixLQUFNLE1BaUJySCxPQWZBcEMsRUFBRTZFLEtBQU0sQ0FDUHRCLEtBQU0sT0FDTmxCLElBQUtpQyxVQUFVUSxRQUNmQyxLQUNDLENBQ0NDLE9BQVMsNEJBQ1RKLHVCQUF5QkEsR0FFM0JLLFFBQVMsU0FBVUYsR0FDZEEsRUFBS0UsU0FDUmpGLEVBQUcsSUFBTTRFLEdBQXlCL0QsUUFBUyx3QkFBeUI4QixhQUtoRSxJQUdSM0MsRUFBRyxvQ0FBcUNzRixNQUFPLFNBQVVDLEdBQ3hEQSxFQUFNOUQsaUJBQ04sSUFBSW1ELEVBQXlCNUUsRUFBRUssTUFBTVEsUUFBUyx3QkFBeUJDLEtBQU0sZ0NBQWlDc0IsS0FBTSxNQUNuSG9ELEVBQXFCeEYsRUFBRSxJQUFNNEUsR0FBd0I5RCxLQUFNLHVCQUF3QkUsTUFDbkZ5RSxFQUF1QnpGLEVBQUUsSUFBTTRFLEdBQXdCOUQsS0FBTSx5QkFBMEJFLE1BQ3ZGcUUsRUFBOEJyRixFQUFFLElBQU00RSxHQUF3QjlELEtBQU0sdUNBQXdDRSxNQW1CN0csT0FqQkFoQixFQUFFNkUsS0FBTSxDQUNQdEIsS0FBTSxPQUNObEIsSUFBS2lDLFVBQVVRLFFBQ2ZDLEtBQ0MsQ0FDQ0MsT0FBUywyQ0FDVEosdUJBQXlCQSxFQUN6QlksbUJBQXFCQSxFQUNyQkMscUJBQXVCQSxFQUN2QkosNEJBQThCQSxHQUVoQ0osUUFBUyxTQUFVRixHQUNkQSxFQUFLRSxZQUtKLFFBT1h2RSxpQ0FBa0MsV0FDakMsR0FBSVYsRUFBRSwwQ0FBMEN5QyxPQUFRLENBQ3ZELElBQUlpRCxFQUFnQjFGLEVBQUcsMENBQ3RCMkYsRUFBb0IzRixFQUFHLDBDQUN2QjRGLEVBQWUsR0FrQmhCLFNBQVNDLElBQ1JELEVBQWUsR0FDZjVGLEVBQUV3RSxLQUFNa0IsRUFBYzVFLEtBQUssTUFBTyxXQUNqQzhFLEVBQWFFLEtBQU05RixFQUFFSyxNQUFNK0IsS0FBSyxTQUdqQ3VELEVBQWtCM0UsSUFBSzRFLEVBQWFHLFlBQ3BDSixFQUFrQkssUUFBUSxVQXZCM0JOLEVBQWNPLFdBQ2RQLEVBQWNRLG1CQUNkUixFQUFjOUUsR0FBSSxXQUFZaUYsR0FFOUI3RixFQUFFLHFDQUFxQ1ksR0FBRyxRQUFTLFdBQ2xELElBQUl1RixFQUFLLFdBQVluRyxFQUFFLDBDQUEwQ2dCLE1BQU8sS0FBTWhCLEVBQUUsMERBQTBEZSxPQUFRLDJEQUNsSmYsRUFBRywwQ0FBMkNxRSxPQUFROEIsR0FDdEROLE1BR0RILEVBQWM1RSxLQUFLLFVBQVVGLEdBQUcsUUFBUyxXQUN4Q1osRUFBRUssTUFBTThCLFNBQVNmLE9BQ2pCcEIsRUFBRUssTUFBTThCLFNBQVNRLFNBQ2pCa0QsUUFlSGxGLHVCQUF3QixXQUV2QixJQUFJeUYsRUFBV3BHLEVBQUUsYUFDakJxRyxRQUFRakcsS0FBSyxDQUNacUQsU0FBVSxpQkFDVjZDLFNBQVUsRUFDVkMsT0FBUSxNQUNSQyxRQUFVLE9BQ1ZDLFFBQVMscUdBQ1RDLE1BQU8sU0FBVTdFLEdBQ2hCQSxFQUFPakIsR0FBRyxPQUFRLGNBR2xCaUIsRUFBT2pCLEdBQUcsUUFBUyxTQUFVVSxJQVEvQixTQUF5Qk8sRUFBUXlCLEdBQ2hDdEQsRUFBRTZCLEdBQVFoQixRQUFRLDhCQUE4QkMsS0FBS3NGLEdBQVVPLEtBQU1yRCxHQUNyRThDLEVBQVNKLFFBQVEsVUFSZlksQ0FBZ0IvRSxFQUFPZ0YsYUFBY2hGLEVBQU9pRixjQUM1Q0MsUUFBUUMscUJBaFRkLENBNFRHQyIsImZpbGUiOiJhZG1pbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQpIHtcblx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXHRcdGFkbWluLmluaXQoKTtcblx0fSk7XG5cblx0dmFyIGFkbWluID0ge1xuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuaWRnRmVhdHVyZUNhcmRXaWRnZXRzKCk7XG5cdFx0XHR0aGlzLmlkZ0Jhbm5lcnNXaWRnZXRzKCk7XG5cdFx0XHR0aGlzLmlkZ0Jsb2NrSW5pdCgpO1xuXHRcdFx0dGhpcy5pZGdTZWN0aW9uc1dpZGdldHNBcmVhcygpO1xuXHRcdFx0dGhpcy5pZGdTZWN0aW9uc1dpZGdldHNBcmVhc0N1c3RvbWl6ZSgpO1xuXHRcdFx0dGhpcy5pZGdUZXh0SW1hZ2VCb3hXaWRnZXRzKCk7XG5cdFx0fSxcblxuXHRcdGlkZ0ZlYXR1cmVDYXJkV2lkZ2V0czogZnVuY3Rpb24gKCkge1xuXHRcdFx0JChkb2N1bWVudCkub24oJ2tleXVwJywgJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCAuY2FyZC10aXRsZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY2FyZC10aXRsZScpLnRleHQoJCh0aGlzKS52YWwoKSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQgLmljb24tc2VsZWN0b3InLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBjYXJkSWNvbiA9ICQodGhpcykudmFsKCk7XG5cdFx0XHRcdGlmKCBjYXJkSWNvbiA9PT0gJ3VwbG9hZC1jdXN0b20taWNvbicgKXtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5mZWF0dXJlLWNhcmQgLmljb24gPiBpbWcnKS5zaG93KCk7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY3VzdG9tLWljb24nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY3VzdG9tLWljb24nKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuZmVhdHVyZS1jYXJkIC5pY29uID4gaW1nJykuaGlkZSgpO1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmZlYXR1cmUtY2FyZCAuaWNvbicpLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2ljb24gJyArICQodGhpcykudmFsKCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmZlYXR1cmUtY2FyZCAuaWNvbicpLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2ljb24gJyArICQodGhpcykudmFsKCkpO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0IC5jYXJkLW1vZGVsJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgY2FyZE1vZGVsID0gJCh0aGlzKS52YWwoKTtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuZmVhdHVyZS1jYXJkJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnZmVhdHVyZS1jYXJkIHN0YXRpYy1oZWlnaHQgJyArIGNhcmRNb2RlbCApO1xuXHRcdFx0XHRpZiggY2FyZE1vZGVsID09PSAnY2FyZC0zJyApe1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmNhcmQtZGVzYy13cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmZlYXR1cmUtY2FyZCAuY2FyZC1kZXNjLCAuZmVhdHVyZS1jYXJkIC5jYXJkLWJ0bicpLnNob3coKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5jYXJkLWRlc2Mtd3JhcHBlcicpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5mZWF0dXJlLWNhcmQgLmNhcmQtZGVzYywgLmZlYXR1cmUtY2FyZCAuY2FyZC1idG4nKS5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0IC5jYXJkLWRlc2MnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmNhcmQtZGVzYycpLnRleHQoJCh0aGlzKS52YWwoKSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JChkb2N1bWVudCkub24oJ2tleXVwJywgJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCAuY2FyZC1idG4tdGV4dCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY2FyZC1idG4uYnRuJykudGV4dCgkKHRoaXMpLnZhbCgpKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRpZGdCYW5uZXJzV2lkZ2V0czogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm51bWJlci1vZi1iYW5uZXJzLWlucHV0JywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0d3BXaWRnZXRzLnNhdmUoICQodGhpcykuY2xvc2VzdCgnLndpZGdldCcpLCAwLCAxLCAwKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnVwbG9hZF9pbWFnZV9idXR0b24nLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHZhciBjbGlja2VkQnV0dG9uID0gJCh0aGlzKTtcblxuXHRcdFx0XHR3cC5tZWRpYS5lZGl0b3Iuc2VuZC5hdHRhY2htZW50ID0gZnVuY3Rpb24ocHJvcHMsIGF0dGFjaG1lbnQpe1xuXHRcdFx0XHRcdGNsaWNrZWRCdXR0b24ucHJldignaW5wdXQnKS52YWwoIGF0dGFjaG1lbnQuaWQgKTtcblx0XHRcdFx0XHRjbGlja2VkQnV0dG9uLnBhcmVudCgpLmZpbmQoJ2ltZy5iYW5uZXItaW1nLXByZXZpZXcnKS5hdHRyKCAnc3JjJywgYXR0YWNobWVudC51cmwgKTtcblx0XHRcdFx0XHR3cFdpZGdldHMuc2F2ZSggY2xpY2tlZEJ1dHRvbi5jbG9zZXN0KCcud2lkZ2V0JyksIDAsIDEsIDApO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR3cC5tZWRpYS5lZGl0b3Iub3BlbiggY2xpY2tlZEJ1dHRvbiApO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucmVtb3ZlLWJhbm5lci1pdGVtJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR2YXIgYmFubmVycyA9ICQodGhpcykuY2xvc2VzdCgnLmlkZy1iYW5uZXJzLXdpZGdldCcpLFxuXHRcdFx0XHRcdG4gPSBiYW5uZXJzLmZpbmQoJy5iYW5uZXJzLWl0ZW1zIC5iYW5uZXInKS5sZW5ndGg7XG5cblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuYmFubmVyJykuYWRkQ2xhc3MoJ2RlbGV0aW5nLWJhbm5lcicpLmZhZGVPdXQoKTtcblx0XHRcdFx0YmFubmVycy5maW5kKCcubnVtYmVyLW9mLWJhbm5lcnMtaW5wdXQnKS52YWwoIG4gLSAxICk7XG5cdFx0XHRcdGJhbm5lcnMuZmluZCgnLmJhbm5lci5kZWxldGluZy1iYW5uZXInKS5yZW1vdmUoKTtcblx0XHRcdFx0d3BXaWRnZXRzLnNhdmUoIGJhbm5lcnMuY2xvc2VzdCgnLndpZGdldCcpLCAwLCAxLCAwKTtcblx0XHRcdH0pO1xuXG5cdFx0fSxcblxuXHRcdGlkZ0Jsb2NrSW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYoIHdwLmVsZW1lbnQgKXtcblxuXHRcdFx0XHR2YXIgZWwgPSB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQsXG5cdFx0XHRcdFx0cmVnaXN0ZXJCbG9ja1R5cGUgPSB3cC5ibG9ja3MucmVnaXN0ZXJCbG9ja1R5cGUsXG5cdFx0XHRcdFx0UmljaFRleHQgPSB3cC5lZGl0b3IuUmljaFRleHQ7XG5cblx0XHRcdFx0ZnVuY3Rpb24gY2hlY2tGb3JBRWxlbWVudChjb250ZW50KSB7XG5cdFx0XHRcdFx0aWYoIGNvbnRlbnQuc3RhcnRzV2l0aCgnPGEnKSApe1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coICdhbHJlYWR5IGhhcyBhJyApO1xuXHRcdFx0XHRcdFx0YmxvY2tTdHlsZSA9IHsgYmFja2dyb3VuZENvbG9yOiAnI2YzZjRmNScgfTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coICdNSVNTSU5HIGEnICk7XG5cdFx0XHRcdFx0XHRibG9ja1N0eWxlID0geyBiYWNrZ3JvdW5kQ29sb3I6ICcjN0YwMDEzJyB9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBibG9ja1N0eWxlO1xuXHRcdFx0XHRyZWdpc3RlckJsb2NrVHlwZSggJ2d1dGVuYmVyZy1ib2lsZXJwbGF0ZS1lczUvaWRnd3AtZ3V0ZW5iZXJnLWJsb2NrLWNhcmQnLCB7XG5cdFx0XHRcdFx0dGl0bGU6ICdGZWF0dXJlIGNhcmQgYmxvY2snLFxuXHRcdFx0XHRcdGljb246ICdwYXBlcmNsaXAnLFxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnd2lkZ2V0cycsXG5cdFx0XHRcdFx0YXR0cmlidXRlczoge1xuXHRcdFx0XHRcdFx0Y29udGVudDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdFx0XHRcdFx0c291cmNlOiAnaHRtbCcsXG5cdFx0XHRcdFx0XHRcdHNlbGVjdG9yOiAnZGl2Jyxcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGVkaXQ6IGZ1bmN0aW9uKCBwcm9wcyApIHtcblx0XHRcdFx0XHRcdHZhciBjb250ZW50ID0gcHJvcHMuYXR0cmlidXRlcy5jb250ZW50O1xuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBvbkNoYW5nZUNvbnRlbnQoIG5ld0NvbnRlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHByb3BzLnNldEF0dHJpYnV0ZXMoIHsgY29udGVudDogbmV3Q29udGVudCB9ICk7XG5cdFx0XHRcdFx0XHRcdGNoZWNrRm9yQUVsZW1lbnQoIGNvbnRlbnQgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGVsKFxuXHRcdFx0XHRcdFx0XHRSaWNoVGV4dCxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHRhZ05hbWU6ICdkaXYnLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogcHJvcHMuY2xhc3NOYW1lLFxuXHRcdFx0XHRcdFx0XHRcdG9uQ2hhbmdlOiBvbkNoYW5nZUNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc3R5bGU6IGJsb2NrU3R5bGVcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0c2F2ZTogZnVuY3Rpb24oIHByb3BzICkge1xuXHRcdFx0XHRcdFx0dmFyIGNvbnRlbnQgPSBwcm9wcy5hdHRyaWJ1dGVzLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHQvLyBjaGVja0ZvckFFbGVtZW50KCBjb250ZW50ICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWwoIFJpY2hUZXh0LkNvbnRlbnQsIHtcblx0XHRcdFx0XHRcdFx0dGFnTmFtZTogJ2RpdicsXG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogcHJvcHMuY2xhc3NOYW1lLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogY29udGVudFxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiggJCgnLndpZGdldC1saXF1aWQtcmlnaHQnKS5sZW5ndGggKXtcblx0XHRcdFx0JCgnLndpZGdldC1saXF1aWQtcmlnaHQnKS5hcHBlbmQoaWRnX2FkbWluLmlkZ19jdXN0b21fc2VjdGlvbnNfZm9ybSk7XG5cblx0XHRcdFx0dmFyIGlkZ193cF93aWRnZXRzX2FyZWFzID0gJCggJ2RpdltpZF49aWRnX3dwX3dpZGdldF9hcmVhX10nICk7XG5cdFx0XHRcdGlkZ193cF93aWRnZXRzX2FyZWFzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLndpZGdldHMtaG9sZGVyLXdyYXAnKS5hZGRDbGFzcygnaWRnLXdwLWN1c3RvbS13aWRnZXQtYXJlYScpO1xuXHRcdFx0XHRcdGlmKCAkKHRoaXMpLmNsb3Nlc3QoJy53aWRnZXRzLWhvbGRlci13cmFwJykuZmluZCgnLnNpZGViYXItZGVzY3JpcHRpb24nKS5sZW5ndGggKXtcblx0XHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLndpZGdldHMtaG9sZGVyLXdyYXAnKS5maW5kKCcuc2lkZWJhci1kZXNjcmlwdGlvbicpLmFwcGVuZCgnPHAgY2xhc3M9XCJkZXNjcmlwdGlvbiBkZXNjcmlwdGlvbi1pZGdcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiYnV0dG9uLWxpbmsgYnV0dG9uLWxpbmstZGVsZXRlIGlkZy13cC13aWRnZXQtcmVtb3ZlLWFyZWFcIj5EZWxldGFyIGVzdGEgc2XDp8OjbzwvYT48L3A+Jylcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcud2lkZ2V0cy1ob2xkZXItd3JhcCcpLmZpbmQoJy5zaWRlYmFyLW5hbWUnKS5hZnRlcignPGRpdiBjbGFzcz1cInNpZGViYXItZGVzY3JpcHRpb25cIj48cCBjbGFzcz1cImRlc2NyaXB0aW9uXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ1dHRvbi1saW5rIGJ1dHRvbi1saW5rLWRlbGV0ZSBpZGctd3Atd2lkZ2V0LXJlbW92ZS1hcmVhXCI+RGVsZXRhciBlc3RhIHNlw6fDo288L2E+PC9wPjwvZGl2PicpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIHNlY3Rpb25UaXRsZSAgPSAnPHA+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25UaXRsZSArPSAnPGxhYmVsPlNlY3Rpb24gdGl0bGU8L2xhYmVsPic7XG5cdFx0XHRcdFx0XHRzZWN0aW9uVGl0bGUgKz0gJzxpbnB1dCBjbGFzcz1cIndpZGVmYXQgc2VjdGlvbi1hcmVhLXRpdGxlXCIgdHlwZT1cInRleHRcIj4nO1xuXHRcdFx0XHRcdFx0c2VjdGlvblRpdGxlICs9ICc8L3A+JztcblxuXHRcdFx0XHRcdHZhciBzZWN0aW9uQ2xhc3NlcyAgPSAnPHA+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25DbGFzc2VzICs9ICc8bGFiZWw+U2VjdGlvbiBjdXN0b20gY2xhc3M8L2xhYmVsPic7XG5cdFx0XHRcdFx0XHRzZWN0aW9uQ2xhc3NlcyArPSAnPGlucHV0IGNsYXNzPVwid2lkZWZhdCBzZWN0aW9uLWFyZWEtY2xhc3Nlc1wiIHR5cGU9XCJ0ZXh0XCI+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25DbGFzc2VzICs9ICc8L3A+JztcblxuXHRcdFx0XHRcdHZhciBiZWZvcmVXaWRnZXRDbGFzc2VzICA9ICc8cD4nO1xuXHRcdFx0XHRcdFx0YmVmb3JlV2lkZ2V0Q2xhc3NlcyArPSAnPGxhYmVsPkJlZm9yZSBlYWNoIHdpZGdldCBjbGFzczwvbGFiZWw+Jztcblx0XHRcdFx0XHRcdGJlZm9yZVdpZGdldENsYXNzZXMgKz0gJzxpbnB1dCBjbGFzcz1cIndpZGVmYXQgc2VjdGlvbi1hcmVhLWJlZm9yZS13aWRnZXQtY2xhc3Nlc1wiIHR5cGU9XCJ0ZXh0XCI+Jztcblx0XHRcdFx0XHRcdGJlZm9yZVdpZGdldENsYXNzZXMgKz0gJzwvcD4nO1xuXG5cdFx0XHRcdFx0dmFyIHNlY3Rpb25VcGRhdGVCdXR0b24gID0gJzxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udHJvbC1hY3Rpb25zXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAzMnB4O1wiPjxkaXYgY2xhc3M9XCJhbGlnbnJpZ2h0XCI+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25VcGRhdGVCdXR0b24gKz0gJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzZWN0aW9uLWFyZWEtY3VzdG9tLWRhdGEtdXBkYXRlIGJ1dHRvbiBidXR0b24tcHJpbWFyeSByaWdodFwiPlVwZGF0ZSBzZWN0aW9uPC9hPic7XG5cdFx0XHRcdFx0XHRzZWN0aW9uVXBkYXRlQnV0dG9uICs9ICc8L2Rpdj48L2Rpdj4nO1xuXG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcud2lkZ2V0cy1ob2xkZXItd3JhcCcpLmZpbmQoJy5kZXNjcmlwdGlvbicpLmxhc3QoKS5hcHBlbmQoc2VjdGlvblRpdGxlICsgc2VjdGlvbkNsYXNzZXMgKyBiZWZvcmVXaWRnZXRDbGFzc2VzICsgc2VjdGlvblVwZGF0ZUJ1dHRvbik7XG5cblx0XHRcdFx0XHR2YXIgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCA9ICQodGhpcykuY2xvc2VzdCggJy53aWRnZXRzLWhvbGRlci13cmFwJyApLmZpbmQoICdkaXZbaWRePWlkZ193cF93aWRnZXRfYXJlYV9dJyApLmF0dHIoICdpZCcgKTtcblxuXHRcdFx0XHRcdCQuYWpheCgge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHR1cmw6IGlkZ19hZG1pbi5hamF4dXJsLFxuXHRcdFx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGFjdGlvbiA6ICdpZGdfd3BfZ2V0X2N1c3RvbV9kYXRhX2luX3dpZGdldF9hcmVhJyxcblx0XHRcdFx0XHRcdFx0XHRpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkIDogaWRnX3dwX3dpZGdldHNfYXJlYV9pZFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHJlcyApe1xuXHRcdFx0XHRcdFx0XHRpZiggcmVzLnN1Y2Nlc3MgKXtcblx0XHRcdFx0XHRcdFx0XHQkKCcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQpLmZpbmQoJy5zZWN0aW9uLWFyZWEtdGl0bGUnKS52YWwocmVzLmRhdGEuc2VjdGlvbl90aXRsZSk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnIycgKyBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkKS5maW5kKCcuc2VjdGlvbi1hcmVhLWNsYXNzZXMnKS52YWwocmVzLmRhdGEuc2VjdGlvbl9jbGFzcyk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnIycgKyBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkKS5maW5kKCcuc2VjdGlvbi1hcmVhLWJlZm9yZS13aWRnZXQtY2xhc3NlcycpLnZhbChyZXMuZGF0YS5zZWN0aW9uX2JlZm9yZV93aWRnZXRfY2xhc3MpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0JCggJy5pZGctd3Atd2lkZ2V0LXJlbW92ZS1hcmVhJyApLmNsaWNrKCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0dmFyIGlkZ193cF93aWRnZXRzX2FyZWFfaWQgPSAgJCh0aGlzKS5jbG9zZXN0KCAnLndpZGdldHMtaG9sZGVyLXdyYXAnICkuZmluZCggJ2RpdltpZF49aWRnX3dwX3dpZGdldF9hcmVhX10nICkuYXR0ciggJ2lkJyApO1xuXG5cdFx0XHRcdFx0XHQkLmFqYXgoIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogaWRnX2FkbWluLmFqYXh1cmwsXG5cdFx0XHRcdFx0XHRcdGRhdGE6XG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0YWN0aW9uIDogJ2lkZ193cF9yZW1vdmVfd2lkZ2V0X2FyZWEnLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWRnX3dwX3dpZGdldHNfYXJlYV9pZCA6IGlkZ193cF93aWRnZXRzX2FyZWFfaWQsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKXtcblx0XHRcdFx0XHRcdFx0XHRpZiggZGF0YS5zdWNjZXNzICl7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKCAnIycgKyBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkICkuY2xvc2VzdCggJy53aWRnZXRzLWhvbGRlci13cmFwJyApLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0JCggJy5zZWN0aW9uLWFyZWEtY3VzdG9tLWRhdGEtdXBkYXRlJyApLmNsaWNrKCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0dmFyIGlkZ193cF93aWRnZXRzX2FyZWFfaWQgPSAkKHRoaXMpLmNsb3Nlc3QoICcud2lkZ2V0cy1ob2xkZXItd3JhcCcgKS5maW5kKCAnZGl2W2lkXj1pZGdfd3Bfd2lkZ2V0X2FyZWFfXScgKS5hdHRyKCAnaWQnICksXG5cdFx0XHRcdFx0XHRcdHNlY3Rpb25fYXJlYV90aXRsZSA9ICQoJyMnICsgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCkuZmluZCggJy5zZWN0aW9uLWFyZWEtdGl0bGUnICkudmFsKCksXG5cdFx0XHRcdFx0XHRcdHNlY3Rpb25fYXJlYV9jbGFzc2VzID0gJCgnIycgKyBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkKS5maW5kKCAnLnNlY3Rpb24tYXJlYS1jbGFzc2VzJyApLnZhbCgpLFxuXHRcdFx0XHRcdFx0XHRzZWN0aW9uX2JlZm9yZV93aWRnZXRfY2xhc3MgPSAkKCcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQpLmZpbmQoICcuc2VjdGlvbi1hcmVhLWJlZm9yZS13aWRnZXQtY2xhc3NlcycgKS52YWwoKTtcblxuXHRcdFx0XHRcdFx0JC5hamF4KCB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IGlkZ19hZG1pbi5hamF4dXJsLFxuXHRcdFx0XHRcdFx0XHRkYXRhOlxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGFjdGlvbiA6ICdpZGdfd3BfdXBkYXRlX2N1c3RvbV9kYXRhX2luX3dpZGdldF9hcmVhJyxcblx0XHRcdFx0XHRcdFx0XHRcdGlkZ193cF93aWRnZXRzX2FyZWFfaWQgOiBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2VjdGlvbl9hcmVhX3RpdGxlIDogc2VjdGlvbl9hcmVhX3RpdGxlLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2VjdGlvbl9hcmVhX2NsYXNzZXMgOiBzZWN0aW9uX2FyZWFfY2xhc3Nlcyxcblx0XHRcdFx0XHRcdFx0XHRcdHNlY3Rpb25fYmVmb3JlX3dpZGdldF9jbGFzcyA6IHNlY3Rpb25fYmVmb3JlX3dpZGdldF9jbGFzcyxcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggZGF0YSApe1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBkYXRhLnN1Y2Nlc3MgKXtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzQ3VzdG9taXplOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiggJCgnI2lkZy13cC1ob21lLXdpZGdldHMtc2VjdGlvbnMtc2VsZWN0b3InKS5sZW5ndGggKXtcblx0XHRcdFx0dmFyICRzZWN0aW9uc0xpc3QgPSAkKCAnI2lkZy13cC1ob21lLXdpZGdldHMtc2VjdGlvbnMtc29ydGFibGUnICksXG5cdFx0XHRcdFx0JHNlY3Rpb25zU2VsZWN0ZWQgPSAkKCAnI2lkZy13cC1ob21lLXdpZGdldHMtc2VjdGlvbnMtc2VsZWN0ZWQnICksXG5cdFx0XHRcdFx0c2VjdGlvbnNWYWxzID0gW107XG5cblx0XHRcdFx0JHNlY3Rpb25zTGlzdC5zb3J0YWJsZSgpO1xuXHRcdFx0XHQkc2VjdGlvbnNMaXN0LmRpc2FibGVTZWxlY3Rpb24oKTtcblx0XHRcdFx0JHNlY3Rpb25zTGlzdC5vbiggJ3NvcnRzdG9wJywgdXBkYXRlU2VjdGlvbkxpc3QgKTtcblxuXHRcdFx0XHQkKCcjaWRnLXdwLWFkZC1ob21lLXdpZGdldHMtc2VjdGlvbnMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dmFyIGxpID0gJzxsaSBpZD1cIicrICQoJyNpZGctd3AtaG9tZS13aWRnZXRzLXNlY3Rpb25zLXNlbGVjdG9yJykudmFsKCkgKydcIj4nKyAkKCcjaWRnLXdwLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucy1zZWxlY3RvciBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCkgKycgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImRhc2hpY29ucyBkYXNoaWNvbnMtdHJhc2hcIj48L2E+PC9saT4nO1xuXHRcdFx0XHRcdCQoICcjaWRnLXdwLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucy1zb3J0YWJsZScgKS5hcHBlbmQoIGxpICk7XG5cdFx0XHRcdFx0dXBkYXRlU2VjdGlvbkxpc3QoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JHNlY3Rpb25zTGlzdC5maW5kKCdsaSA+IGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5oaWRlKCk7XG5cdFx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcblx0XHRcdFx0XHR1cGRhdGVTZWN0aW9uTGlzdCgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRmdW5jdGlvbiB1cGRhdGVTZWN0aW9uTGlzdCgpIHtcblx0XHRcdFx0XHRzZWN0aW9uc1ZhbHMgPSBbXTtcblx0XHRcdFx0XHQkLmVhY2goICRzZWN0aW9uc0xpc3QuZmluZCgnbGknKSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0c2VjdGlvbnNWYWxzLnB1c2goICQodGhpcykuYXR0cignaWQnKSApO1xuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdCRzZWN0aW9uc1NlbGVjdGVkLnZhbCggc2VjdGlvbnNWYWxzLnRvU3RyaW5nKCkgKTtcblx0XHRcdFx0XHQkc2VjdGlvbnNTZWxlY3RlZC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRpZGdUZXh0SW1hZ2VCb3hXaWRnZXRzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciAkaWRnVGV4dCA9ICQoJy5pZGctdGV4dCcpO1xuXHRcdFx0dGlueW1jZS5pbml0KHtcblx0XHRcdFx0c2VsZWN0b3I6ICcuaWRnLXJpY2gtdGV4dCcsXG5cdFx0XHRcdG1lbnViYXIgOiBmYWxzZSxcblx0XHRcdFx0aGVpZ2h0OiAnMjAwJyxcblx0XHRcdFx0cGx1Z2lucyA6ICdsaW5rJyxcblx0XHRcdFx0dG9vbGJhcjogJ3VuZG8sIHJlZG8sIGJvbGQsIGl0YWxpYywgYWxpZ25sZWZ0LCBhbGlnbmNlbnRlciwgYWxpZ25yaWdodCwgYWxpZ25qdXN0aWZ5LCBjdXQsIGxpbmssIGNvcHksIHBhc3RlJyxcblx0XHRcdFx0c2V0dXA6IGZ1bmN0aW9uIChlZGl0b3IpIHtcblx0XHRcdFx0XHRlZGl0b3Iub24oJ2luaXQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBvcmlnaW5hbEVkaXRvciA9IGVkaXRvci5nZXRFbGVtZW50KCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0ZWRpdG9yLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyggdGlueW1jZS5nZXQoICQodGhpcykgKS5nZXRFbGVtZW50KCkgKTtcblx0XHRcdFx0XHRcdHVwZGF0ZVRleHRBcmVhKCBlZGl0b3IuZ2V0RWxlbWVudCgpLCBlZGl0b3IuZ2V0Q29udGVudCgpICk7XG5cdFx0XHRcdFx0XHR0aW55TUNFLnRyaWdnZXJTYXZlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRmdW5jdGlvbiB1cGRhdGVUZXh0QXJlYSggZWRpdG9yLCBjb250ZW50ICkge1xuXHRcdFx0XHQkKGVkaXRvcikuY2xvc2VzdCgnLmlkZy10ZXh0LWltYWdlLWJveC13aWRnZXQnKS5maW5kKCRpZGdUZXh0KS5odG1sKCBjb250ZW50ICk7XG5cdFx0XHRcdCRpZGdUZXh0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xufSkoalF1ZXJ5KTtcbiJdfQ==
